<%- include ('../partials/header') %>
	
<title>HSE - Home</title>
<script src="../scripts/jsQR.js"></script>
<link type="text/css" rel="stylesheet" href="/stylesheets/hse-home.css" />


<div id="confirmation-modal">
  <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Confirm Submission</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form action="/HSE/patient-registration" method="POST">
          <div class="modal-body">
            <div class="form-group">
              <label for="stage_no" class="col-form-label">Stage:</label>
              <input type="number" min="1" max="4" name="stage" class="form-control" id="stage_no" required>
            </div>
            <div class="form-group">
              <label for="patient_id" class="col-form-label">Patient ID:</label>
              <input type="text" name="pid" class="form-control" id="patient_id" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<div class="row">
  <div class="col col-lg-4">
    <h3 class="list-head">Registered Patients List</h3>
    <ul class="list-group">
      <% regPatients.forEach(function(patient){ %>
        <li class="list-group-item"><%= patient.fname + " " + patient.lname %></li>
      <% }); %>
    </ul>
    <br>
    <h3 class="list-head">Doctor Consultation Queue</h3>
    <ul class="list-group">
      <% consultationQueue.forEach(function(patient){ %>
        <li class="list-group-item"><%= patient.fname + " " + patient.lname %></li>
      <% }); %>
    </ul>
  </div>
  <div class="col col-lg-4">
    <div id="stage">
      <span id="1" class="round active-tab">Stage 1</span>
      <span id="2" class="round">Stage 2</span>
      <span id="3" class="round">Stage 3</span>
      <span id="4" class="round">Stage 4</span>
    </div>
    
    <div id="select-way">
      <select id="registration-option">
        <option value="qr">Patient Registration using QR Code</option>
        <option value="patient-id">Patient Registration using Patient ID</option>
      </select>
    </div>

    <div id="qr-scanner">
      <div id="loadingMessage">ðŸŽ¥ Unable to access video stream (Please make sure you have a webcam enabled)</div>
      <canvas id="canvas" hidden></canvas>
      <div id="output" hidden>
        <div id="outputMessage">Output : No QR Code Detected...</div>
        <div hidden><b>Output : </b> <span id="outputData"></span></div>
      </div>
    </div>
      
    <div class="d-none" id="patient-id">
      <form>
        <label class="intro" for="p_id">Enter Patient ID: </label>
        <input id="p_id" type="text" placeholder="Patient ID" data-toggle="popover" data-placement="top" data-content="Please fill out this field" required>
        <button onclick="getConfirmationModal(document.getElementById('p_id').value)" class="btn btn-primary" type="button">Submit</button>
      </form>
    </div>
  </div>
  <div class="col col-lg-4">
    <h3 class="list-head">Billing Counter Queue</h3>
    <ul class="list-group">
      <% billingQueue.forEach(function(patient){ %>
        <li class="list-group-item"><%= patient.fname + " " + patient.lname %></li>
      <% }); %>
    </ul>
    <br>
    <h3 class="list-head">Medicine Counter Queue</h3>
    <ul class="list-group">
      <% medicineQueue.forEach(function(patient){ %>
        <li class="list-group-item"><%= patient.fname + " " + patient.lname %></li>
      <% }); %>
    </ul>
  </div>
</div>















<%- include ('../partials/footer') %>

